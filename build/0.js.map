{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SignupPage } from './signup';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SignupPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SignupPage),\r\n  ],\r\n})\r\nexport class SignupPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Loading, LoadingController, AlertController } from 'ionic-angular';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { UserService } from '../../providers/user/user.service';\r\nimport { AuthService } from '../../providers/auth/auth.service';\r\nimport { FirebaseAuthState } from 'angularfire2';\r\n\r\nimport 'rxjs/add/operator/first';\r\nimport { HomePage } from '../home/home';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-signup',\r\n  templateUrl: 'signup.html',\r\n})\r\nexport class SignupPage {\r\n  signupForm: FormGroup;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public formBuilder: FormBuilder,\r\n    public userService: UserService,\r\n    public authService: AuthService,\r\n    public loadingCtrl: LoadingController,\r\n    public alertCtrl: AlertController) {\r\n\r\n    let emailRegex = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\r\n\r\n    this.signupForm = this.formBuilder.group({\r\n      uid: [],\r\n      name: ['', [Validators.required, Validators.minLength(3)]],\r\n      username: ['', [Validators.required, Validators.minLength(3)]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      email: ['', Validators.compose([Validators.required, Validators.pattern(emailRegex)])]\r\n    })\r\n  }\r\n\r\n  onSubmit(): void {\r\n\r\n    let loading: Loading = this.showLoading();\r\n    let formUser = this.signupForm.value;\r\n    let username: string = formUser.username;\r\n\r\n    this.userService.userExists(username)\r\n      .first()\r\n      .subscribe((userExists: boolean) => {\r\n\r\n        if (!userExists) {\r\n          this.authService.createAuthUser({\r\n            email: formUser.email,\r\n            password: formUser.password\r\n          })\r\n            .then((authState: FirebaseAuthState) => {\r\n\r\n              delete formUser.password;\r\n              let uuid: string = authState.auth.uid;\r\n\r\n              this.userService.create(formUser, uuid)\r\n                .then(() => {\r\n                  console.log(\"Usuário Cadastrado\");\r\n                  this.navCtrl.setRoot(HomePage);\r\n                  loading.dismiss();\r\n                })\r\n                .catch((error: any) => {\r\n                  console.log(error);\r\n                  loading.dismiss();\r\n                  this.showAlert(error);\r\n                })\r\n\r\n            }).catch((error: any) => {\r\n              console.log(error);\r\n              loading.dismiss();\r\n              this.showAlert(error);\r\n            })\r\n        } else {\r\n          this.showAlert(`O Username ${username} já está sendo usado em outra conta.`);\r\n          loading.dismiss();\r\n        }\r\n\r\n      });\r\n  }\r\n\r\n  private showLoading(): Loading {\r\n    let loading: Loading = this.loadingCtrl.create({\r\n      content: \"Aguarde um momento...\"\r\n    });\r\n\r\n    loading.present();\r\n\r\n    return loading;\r\n  }\r\n\r\n  private showAlert(message: string): void {\r\n    this.alertCtrl.create({\r\n      message: message,\r\n      buttons: [\"Ok\"]\r\n    }).present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}